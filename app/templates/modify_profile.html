{% extends "base.html" %}

{% block title %}Modifica profilo{% endblock %}

{% block main %}
    <h1>Modifica profilo</h1>
    <p>Inserire i nuovi dati</p>
    <form action="{{ url_for('profile.modify', profile_id=profile.id) }}" method="POST">
        <input type="text" id="name" name="name" value="{{ profile.name }}" required>
        <input type="text" id="surname" name="surname" value="{{ profile.surname }}" required>
        <input type="text" id="image_url" name="image_url" value="{{ profile.image_url }}" required>
        <input type="date" id="birth_date" name="birth_date" value="{{ profile.birth_date }}" required>
        <button type="submit">Conferma</button>
    </form>
    <a href="{{ url_for('account.view') }}">Annulla</a>
{% endblock %}
{% block scripts %}
<script>
    const birthDateInput = document.getElementById("birth_date");
    const currentDate = new Date();
    const currentYear = currentDate.getFullYear();

    // Calcola la data di 100 anni fa
    const minYear = currentYear - 100;
    const minDate = new Date(minYear, 0, 1); // 1 gennaio dell'anno minimo
    const maxDate = currentDate; // Data corrente

    // Imposta gli attributi min e max
    birthDateInput.min = minDate.toISOString().split('T')[0]; // Formato YYYY-MM-DD
    birthDateInput.max = maxDate.toISOString().split('T')[0];

    // Opzionalmente, aggiungi un evento per controllare la data inserita
    birthDateInput.addEventListener('change', function() {
        const selectedDate = new Date(this.value);
        if (selectedDate > maxDate) {
            alert("La data di nascita non pu√≤ essere nel futuro.");
            this.value = ""; // Resetta il campo
        }
    });
    </script>
{% endblock %}