{% extends "base.html" %}

{% block title %}Registrazione{% endblock %}

{% block main %}
    <h1>Registrazione</h1>

    <form action="{{ url_for('auth.register') }}" method="POST">
        <input type="text" id="name" name="name" placeholder="Nome" required>
        <input type="text" id="surname" name="surname" placeholder="Cognome" required>
        <input type="date" id="birth_date" name="birth_date" placeholder="Data di nascita" required>
        <input type="email" id="email" name="email" placeholder="Email" required>
        <input type="password" id="password" name="password" placeholder="Password" required>
        <div id="password-strength-message"></div>
        <input type="password" id="confirm_password" name="confirm_password" placeholder="Conferma password" required>
        <button type="submit">Registrati</button>
    </form>
    
    <a href="{{url_for('auth.login')}}">Hai già un account? Accedi</a>
{% endblock %}
{% block scripts %}
<script>
    const birthDateInput = document.getElementById("birth_date");
    const currentDate = new Date();
    const currentYear = currentDate.getFullYear();

    // Calcola la data di 100 anni fa
    const minYear = currentYear - 100;
    const minDate = new Date(minYear, 0, 1); // 1 gennaio dell'anno minimo
    const maxDate = currentDate; // Data corrente

    // Imposta gli attributi min e max
    birthDateInput.min = minDate.toISOString().split('T')[0]; // Formato YYYY-MM-DD
    birthDateInput.max = maxDate.toISOString().split('T')[0];

    // Opzionalmente, aggiungi un evento per controllare la data inserita
    birthDateInput.addEventListener('change', function() {
        const selectedDate = new Date(this.value);
        if (selectedDate > maxDate) {
            alert("La data di nascita non può essere nel futuro");
            this.value = ""; // Resetta il campo
        }
    });
    </script>
{% endblock %}